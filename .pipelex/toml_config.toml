# =============================================================================
# Pipelex TOML Configuration for pipelex-demo
# =============================================================================
# Configures TOML/MTHDS formatting and linting behaviour for this project.
# Powered by the Pipelex extension (plxt / taplo engine).
#
# Docs: https://taplo.tamasfe.dev/configuration/
# =============================================================================

# ---------------------------------------------------------------------------
# File discovery
# ---------------------------------------------------------------------------

# Glob patterns for files to process.
# Default: ["**/*.toml"]
include = ["**/*.toml", "**/*.mthds"]

exclude = [
  ".venv/**",
  ".mypy_cache/**",
  ".ruff_cache/**",
  ".pytest_cache/**",
  "__pycache__/**",
  "target/**",
  "node_modules/**",
  ".git/**",
  "*.lock",
] # Glob patterns for files to ignore.
# These are evaluated relative to the config file location.

# =============================================================================
# Global formatting defaults
# =============================================================================
# These apply to every file matched by `include` unless overridden by a
# [[rule]].formatting section below.  Every option is shown at its built-in
# default so you can tune any of them in one place.

[formatting]

# Align consecutive key = value entries so the "=" signs line up.
# Possible values: true | false
align_entries = true

# Align end-of-line comments on consecutive commented lines.
# Possible values: true | false
align_comments = true

# Align a comment even when there is only one (no consecutive group).
# Only meaningful when align_comments = true.
# Possible values: true | false
align_single_comments = true

# Add a trailing comma after the last element in multiline arrays.
# Possible values: true | false
array_trailing_comma = true

# Automatically expand an array to multiple lines when it would exceed
# column_width.
# Possible values: true | false
array_auto_expand = true

# Automatically collapse a multiline array back onto one line when it fits
# within column_width.
# Possible values: true | false
array_auto_collapse = false

# Expand inline tables (e.g. { a = 1, b = 2 }) onto multiple lines when
# they exceed column_width.
# Possible values: true | false
inline_table_expand = true

# Omit spaces inside single-line array brackets: [1, 2] vs [ 1, 2 ].
# Possible values: true | false
compact_arrays = true

# Omit spaces inside inline table braces: {a=1} vs { a = 1 }.
# Possible values: true | false
compact_inline_tables = false

# Omit spaces around the "=" in key-value pairs: key=value vs key = value.
# Possible values: true | false
compact_entries = false

# Target maximum line width (in columns) used by array_auto_expand /
# array_auto_collapse and inline_table_expand.
# Possible values: any positive integer
column_width = 80

# Indent sub-tables relative to their parent table header.
# Possible values: true | false
indent_tables = false

# Indent key-value entries under their [table] header.
# Possible values: true | false
indent_entries = false

# The string used for one level of indentation.
# Possible values: any string (commonly "  " or "\t")
indent_string = "  "

# Ensure the file ends with a newline character.
# Possible values: true | false
trailing_newline = true

# Sort top-level keys alphabetically.
# Possible values: true | false
reorder_keys = false

# Sort values inside arrays alphabetically.
# Possible values: true | false
reorder_arrays = false

# Sort keys inside inline tables alphabetically.
# Possible values: true | false
reorder_inline_tables = false

# Maximum number of consecutive blank lines to preserve.
# Possible values: any non-negative integer
allowed_blank_lines = 2


# Use Windows-style CRLF (\r\n) line endings instead of LF (\n).
# Possible values: true | false
crlf = false

# =============================================================================
# Per-file-type rules
# =============================================================================
# Each [[rule]] can narrow its scope with `include` / `exclude` globs and
# provide its own [rule.formatting] overrides.  Options not listed here fall
# back to the global [formatting] section above.


# ---------------------------------------------------------------------------
# Rule: TOML files
# ---------------------------------------------------------------------------
[[rule]]
# Which files this rule applies to (relative globs).
include = ["**/*.toml"]

# Per-rule formatting overrides — all at defaults so you can tweak them
# independently of .mthds files.
[rule.formatting]
# align_entries         = false
# align_comments        = true
# align_single_comments = true
# array_trailing_comma  = true
# array_auto_expand     = true
# array_auto_collapse   = true
# inline_table_expand   = true
# compact_arrays        = true
# compact_inline_tables = false
# compact_entries       = false
# column_width          = 80
# indent_tables         = false
# indent_entries        = false
# indent_string         = "  "
# trailing_newline      = true
# allowed_blank_lines   = 2


# ---------------------------------------------------------------------------
# Rule: MTHDS files (Pipelex pipeline definitions)
# ---------------------------------------------------------------------------
[[rule]]
# Which files this rule applies to (relative globs).
include = ["**/*.mthds"]

# Per-rule formatting overrides — all at defaults so you can tweak them
# independently of .toml files.
[rule.formatting]
# align_entries         = false
# align_comments        = true
# align_single_comments = true
# array_trailing_comma  = true
# array_auto_expand     = true
# array_auto_collapse   = true
# inline_table_expand   = true
# compact_arrays        = true
# compact_inline_tables = false
# compact_entries       = false
# column_width          = 80
# indent_tables         = false
# indent_entries        = false
# indent_string         = "  "
# trailing_newline      = true
# allowed_blank_lines   = 2
