<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combo: graphspec</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: var(--bg-color, #f5f5f5);
            transition: background-color 0.3s;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        h1 {
            color: var(--text-color, #333);
            margin: 0;
            transition: color 0.3s;
        }
        .theme-selector {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .theme-selector label {
            font-size: 14px;
            color: var(--label-color, #666);
            transition: color 0.3s;
        }
        .theme-selector select {
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color, #ccc);
            background: var(--select-bg, white);
            color: var(--text-color, #333);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .theme-selector select:hover {
            border-color: var(--border-hover, #999);
        }
        .mermaid-container {
            background-color: var(--container-bg, white);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s;
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .hint {
            color: var(--label-color, #666);
            font-size: 14px;
            margin-top: 16px;
            text-align: center;
            transition: color 0.3s;
        }
        .data-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 12px;
            width: 80vw;
            max-width: 1200px;
            max-height: 80vh;
            overflow: auto;
            z-index: 1000;
            display: none;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            min-width: 600px;
        }
        .data-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid #444;
        }
        .data-modal-title {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .data-modal-title-primary {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
        }
        .data-modal-title-secondary {
            font-size: 11px;
            font-weight: 400;
            color: #666;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        }
        .data-modal-close {
            cursor: pointer;
            color: #888;
            font-size: 24px;
            line-height: 1;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .data-modal-close:hover {
            background: #333;
            color: #fff;
        }
        .format-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            gap: 8px;
        }
        .format-tabs {
            display: flex;
            gap: 4px;
        }
        .format-actions {
            display: flex;
            gap: 4px;
        }
        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            background: #333;
            color: #888;
            border: none;
            transition: all 0.2s;
        }
        .action-btn:hover {
            background: #444;
            color: #fff;
        }
        .action-btn.copied {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }
        .action-btn svg {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }
        .format-tab {
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            background: #333;
            color: #888;
            border: none;
            transition: all 0.2s;
        }
        .format-tab:hover {
            background: #444;
            color: #ccc;
        }
        .format-tab.active {
            background: #3b82f6;
            color: #fff;
        }
        .format-tab:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .data-modal-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.5;
        }
        .data-modal-content.text-content {
            line-height: 1;
            white-space: pre;
            word-wrap: normal;
            overflow-x: auto;
            padding-right: 20px;
        }
        .data-modal-content.html-content {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 12px;
            border-radius: 4px;
        }
        .data-modal-content.html-content table {
            border-collapse: collapse;
            width: 100%;
        }
        .data-modal-content.html-content th,
        .data-modal-content.html-content td {
            border: 1px solid #444;
            padding: 8px 12px;
            text-align: left;
        }
        .data-modal-content.html-content th {
            background: #252a30;
            color: #e0e0e0;
            font-weight: 600;
        }
        .data-modal-content.html-content tr:hover {
            background: #2a2530;
        }
        .data-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }
        .clickable-stuff {
            cursor: pointer !important;
        }
        .clickable-stuff:hover {
            filter: brightness(1.1);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Combo: graphspec</h1>
        <div class="theme-selector">
            <label for="theme-select">Theme:</label>
            <select id="theme-select">
                <option value="default">Default</option>
                <option value="dark">Dark</option>
                <option value="forest">Forest</option>
                <option value="neutral">Neutral</option>
                <option value="base">Base</option>
            </select>
        </div>
    </div>
    <div class="mermaid-container">
        <div class="mermaid" id="mermaid-diagram">
flowchart TD

    %% Pipe and stuff nodes within controller subgraphs
    subgraph sg_n_d999b567cb["analyze_cvs_for_job_offer"]
        subgraph sg_n_73e92e657c["process_cv_batch"]
            subgraph sg_n_a39a037228["process_cv"]
                n_8893ab3654["analyze_cv"]
                s_dc8e9682f0(["candidate_profile<br/>CandidateProfile"]):::stuff
                n_7abb594330["analyze_match"]
                s_15dd06fe68(["match_analysis<br/>MatchAnalysis"]):::stuff
                n_2eda08dfa5["extract_cv"]
                s_385e2c2510(["cv_pages<br/>Page"]):::stuff
            end
            subgraph sg_n_46a5b90c7e["process_cv"]
                n_ec4b74880e["analyze_cv"]
                s_44444fe85a(["candidate_profile<br/>CandidateProfile"]):::stuff
                n_1a61f657ec["analyze_match"]
                s_c448a753f6(["match_analysis<br/>MatchAnalysis"]):::stuff
                n_ec4eff0ce7["extract_cv"]
                s_451643b0ff(["cv_pages<br/>Page"]):::stuff
            end
        end
        n_fd0528b4ef["analyze_job_requirements"]
        s_b6910d1cd9(["job_requirements<br/>JobRequirements"]):::stuff
        n_b850f85f50["extract_job_offer"]
        s_482a2528d9(["job_offer_pages<br/>Page"]):::stuff
    end

    %% Pipeline input stuff nodes (no producer)
    s_c8adf02cf5(["cv_pdf<br/>PDF"]):::stuff
    s_b82bebd560(["cv_pdf<br/>PDF"]):::stuff
    s_4a6729ed7a(["job_offer_pdf<br/>PDF"]):::stuff

    %% Data flow edges: producer -> stuff -> consumer
    n_7abb594330 --> s_15dd06fe68
    n_1a61f657ec --> s_c448a753f6
    n_b850f85f50 --> s_482a2528d9
    n_ec4eff0ce7 --> s_451643b0ff
    n_ec4b74880e --> s_44444fe85a
    n_8893ab3654 --> s_dc8e9682f0
    n_fd0528b4ef --> s_b6910d1cd9
    n_2eda08dfa5 --> s_385e2c2510
    s_482a2528d9 --> n_fd0528b4ef
    s_c8adf02cf5 --> n_2eda08dfa5
    s_b82bebd560 --> n_ec4eff0ce7
    s_451643b0ff --> n_ec4b74880e
    s_44444fe85a --> n_1a61f657ec
    s_dc8e9682f0 --> n_7abb594330
    s_b6910d1cd9 --> n_1a61f657ec
    s_b6910d1cd9 --> n_7abb594330
    s_385e2c2510 --> n_8893ab3654
    s_4a6729ed7a --> n_b850f85f50

    %% Style definitions
    classDef failed fill:#ffcccc,stroke:#cc0000
    classDef controller fill:#e6f3ff,stroke:#0066cc
    classDef stuff fill:#fff3e6,stroke:#cc6600,stroke-width:2px

    %% Subgraph depth-based coloring
    style sg_n_46a5b90c7e fill:#fffde6
    style sg_n_73e92e657c fill:#e6ffe6
    style sg_n_a39a037228 fill:#fffde6
    style sg_n_d999b567cb fill:#e6f3ff
        </div>
    </div>
    <p class="hint">Click on data nodes (orange pills) to view their full content</p>
    <div class="data-modal-overlay" id="modal-overlay"></div>
    <div class="data-modal" id="data-modal">
        <div class="data-modal-header">
            <span class="data-modal-title" id="modal-title">Data Content</span>
            <span class="data-modal-close" onclick="hideModal()">&times;</span>
        </div>
        <div class="format-toolbar">
            <div class="format-tabs" id="format-tabs">
                <button class="format-tab active" data-format="html" id="tab-html">HTML</button>
                <button class="format-tab" data-format="json" id="tab-json">JSON</button>
                <button class="format-tab" data-format="text" id="tab-text">Pretty</button>
            </div>
            <div class="format-actions">
                <button class="action-btn" id="copy-btn" onclick="copyContent()" title="Copy">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1z
                        m3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z
                        m0 16H8V7h11v14z"/></svg>
                </button>
                <button class="action-btn" id="download-btn" onclick="downloadContent()" title="Download">
                    <svg viewBox="0 0 24 24">
                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                    </svg>
                </button>
            </div>
        </div>
        <div class="data-modal-content" id="modal-content"></div>
    </div>
    <script>
        // Embedded stuff data from graph (all formats)
        const stuffDataJson = {"s_b94e399ab9": {"items": [{"match_score": 358.691598511879, "strengths": "boneiiNAiKnZkUtySttm", "gaps": "WIodADYSxbcGGffJwirS", "overall_assessment": "AMSfxghBitqExjCgUFiq"}, {"match_score": -61423.1314225705, "strengths": "gPmfVOzopfdPwtWNZvbU", "gaps": "vJDfvwBFBIreWcfnfiUf", "overall_assessment": "gnAFpiwCyPmyQgVOTYrF"}]}, "s_4a6729ed7a": {"url": "https://pipelex-web.s3.amazonaws.com/demo/Job-Offer.pdf"}, "s_15d74c362d": {"items": [{"url": "data/CVx5/CV-01.pdf"}, {"url": "data/CVx5/CV-02.pdf"}]}, "s_482a2528d9": {"items": [{"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}]}, "s_b6910d1cd9": {"required_skills": "rPFrGsEsxuZQIKohoNZE", "responsibilities": "npHVIfutLhgfyYqytjzQ", "qualifications": "FmfQxeLzEftxRnfQTHwB", "nice_to_haves": "PEIwUgUGmKUHjVjzjWIw"}, "s_15dd06fe68": {"match_score": 358.691598511879, "strengths": "boneiiNAiKnZkUtySttm", "gaps": "WIodADYSxbcGGffJwirS", "overall_assessment": "AMSfxghBitqExjCgUFiq"}, "s_c8adf02cf5": {"url": "data/CVx5/CV-01.pdf"}, "s_385e2c2510": {"items": [{"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}]}, "s_dc8e9682f0": {"skills": "MkvbtMmnWIApjOdwjqRx", "experience": "CFJgKeyHQNCjJdfLSPxM", "education": "DgadhTXsoWfCwZbIuLUA", "achievements": "iUfzQOZenwnYorIzpGlU"}, "s_c448a753f6": {"match_score": -61423.1314225705, "strengths": "gPmfVOzopfdPwtWNZvbU", "gaps": "vJDfvwBFBIreWcfnfiUf", "overall_assessment": "gnAFpiwCyPmyQgVOTYrF"}, "s_b82bebd560": {"url": "data/CVx5/CV-02.pdf"}, "s_451643b0ff": {"items": [{"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}, {"text_and_images": {"text": {"text": "DRY RUN: OCR text"}, "images": []}, "page_view": null}]}, "s_44444fe85a": {"skills": "uFnIkwWXWoQibNMkfUbx", "experience": "WYxdaxuLRghrJVNTcevU", "education": "NympQPOkbWDKTmvSUGde", "achievements": "LfHsHyIQynfTWoopagTv"}};
        const stuffDataText = {"s_b94e399ab9": "    1    \u2502  Attribute                                           \u2503 Value                             \n         \u2502 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n         \u2502  match_score                                         \u2502 358.691598511879                  \n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n         \u2502  strengths                                           \u2502 boneiiNAiKnZkUtySttm              \n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n         \u2502  gaps                                                \u2502 WIodADYSxbcGGffJwirS              \n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n         \u2502  overall_assessment                                  \u2502 AMSfxghBitqExjCgUFiq              \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n    2    \u2502  Attribute                                           \u2503 Value                             \n         \u2502 \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n         \u2502  match_score                                         \u2502 -61423.1314225705                 \n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n         \u2502  strengths                                           \u2502 gPmfVOzopfdPwtWNZvbU              \n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n         \u2502  gaps                                                \u2502 vJDfvwBFBIreWcfnfiUf              \n         \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n         \u2502  overall_assessment                                  \u2502 gnAFpiwCyPmyQgVOTYrF              \n", "s_4a6729ed7a": "{\n    \"url\": \"https://pipelex-web.s3.amazonaws.com/demo/Job-Offer.pdf\"\n}\n", "s_15d74c362d": "           1            \u2502 {                                                                         \n                        \u2502     \"url\": \"data/CVx5/CV-01.pdf\"                                          \n                        \u2502 }                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n           2            \u2502 {                                                                         \n                        \u2502     \"url\": \"data/CVx5/CV-02.pdf\"                                          \n                        \u2502 }                                                                         \n", "s_482a2528d9": "   1    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   2    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   3    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   4    \u2502 DRY RUN: OCR text                                                                         \n", "s_b6910d1cd9": " Attribute                                              \u2503 Value                                     \n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n required_skills                                        \u2502 rPFrGsEsxuZQIKohoNZE                      \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n responsibilities                                       \u2502 npHVIfutLhgfyYqytjzQ                      \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n qualifications                                         \u2502 FmfQxeLzEftxRnfQTHwB                      \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n nice_to_haves                                          \u2502 PEIwUgUGmKUHjVjzjWIw                      \n", "s_15dd06fe68": " Attribute                                                  \u2503 Value                                 \n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n match_score                                                \u2502 358.691598511879                      \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n strengths                                                  \u2502 boneiiNAiKnZkUtySttm                  \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n gaps                                                       \u2502 WIodADYSxbcGGffJwirS                  \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n overall_assessment                                         \u2502 AMSfxghBitqExjCgUFiq                  \n", "s_c8adf02cf5": "{\n    \"url\": \"data/CVx5/CV-01.pdf\"\n}\n", "s_385e2c2510": "   1    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   2    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   3    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   4    \u2502 DRY RUN: OCR text                                                                         \n", "s_dc8e9682f0": " Attribute                                       \u2503 Value                                            \n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n skills                                          \u2502 MkvbtMmnWIApjOdwjqRx                             \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n experience                                      \u2502 CFJgKeyHQNCjJdfLSPxM                             \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n education                                       \u2502 DgadhTXsoWfCwZbIuLUA                             \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n achievements                                    \u2502 iUfzQOZenwnYorIzpGlU                             \n", "s_c448a753f6": " Attribute                                                  \u2503 Value                                 \n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n match_score                                                \u2502 -61423.1314225705                     \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n strengths                                                  \u2502 gPmfVOzopfdPwtWNZvbU                  \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n gaps                                                       \u2502 vJDfvwBFBIreWcfnfiUf                  \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n overall_assessment                                         \u2502 gnAFpiwCyPmyQgVOTYrF                  \n", "s_b82bebd560": "{\n    \"url\": \"data/CVx5/CV-02.pdf\"\n}\n", "s_451643b0ff": "   1    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   2    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   3    \u2502 DRY RUN: OCR text                                                                         \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n   4    \u2502 DRY RUN: OCR text                                                                         \n", "s_44444fe85a": " Attribute                                       \u2503 Value                                            \n\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n skills                                          \u2502 uFnIkwWXWoQibNMkfUbx                             \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n experience                                      \u2502 WYxdaxuLRghrJVNTcevU                             \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n education                                       \u2502 NympQPOkbWDKTmvSUGde                             \n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n achievements                                    \u2502 LfHsHyIQynfTWoopagTv                             \n"};
        const stuffDataHtml = {"s_b94e399ab9": "<table ><thead><tr><th>match_score</th><th>strengths</th><th>gaps</th><th>overall_assessment</th></tr></thead><tbody><tr><td>358.691598511879</td><td>boneiiNAiKnZkUtySttm</td><td>WIodADYSxbcGGffJwirS</td><td>AMSfxghBitqExjCgUFiq</td></tr><tr><td>-61423.1314225705</td><td>gPmfVOzopfdPwtWNZvbU</td><td>vJDfvwBFBIreWcfnfiUf</td><td>gnAFpiwCyPmyQgVOTYrF</td></tr></tbody></table>", "s_4a6729ed7a": "<a href=\"https://pipelex-web.s3.amazonaws.com/demo/Job-Offer.pdf\" class=\"msg-pdf\">https://pipelex-web.s3.amazonaws.com/demo/Job-Offer.pdf</a>", "s_15d74c362d": "<table ><thead><tr><th>url</th></tr></thead><tbody><tr><td>data/CVx5/CV-01.pdf</td></tr><tr><td>data/CVx5/CV-02.pdf</td></tr></tbody></table>", "s_482a2528d9": "<table ><thead><tr><th>text_and_images</th><th>page_view</th></tr></thead><tbody><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr></tbody></table>", "s_b6910d1cd9": "<table ><tr><th>required_skills</th><td>rPFrGsEsxuZQIKohoNZE</td></tr><tr><th>responsibilities</th><td>npHVIfutLhgfyYqytjzQ</td></tr><tr><th>qualifications</th><td>FmfQxeLzEftxRnfQTHwB</td></tr><tr><th>nice_to_haves</th><td>PEIwUgUGmKUHjVjzjWIw</td></tr></table>", "s_15dd06fe68": "<table ><tr><th>match_score</th><td>358.691598511879</td></tr><tr><th>strengths</th><td>boneiiNAiKnZkUtySttm</td></tr><tr><th>gaps</th><td>WIodADYSxbcGGffJwirS</td></tr><tr><th>overall_assessment</th><td>AMSfxghBitqExjCgUFiq</td></tr></table>", "s_c8adf02cf5": "<a href=\"data/CVx5/CV-01.pdf\" class=\"msg-pdf\">data/CVx5/CV-01.pdf</a>", "s_385e2c2510": "<table ><thead><tr><th>text_and_images</th><th>page_view</th></tr></thead><tbody><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr></tbody></table>", "s_dc8e9682f0": "<table ><tr><th>skills</th><td>MkvbtMmnWIApjOdwjqRx</td></tr><tr><th>experience</th><td>CFJgKeyHQNCjJdfLSPxM</td></tr><tr><th>education</th><td>DgadhTXsoWfCwZbIuLUA</td></tr><tr><th>achievements</th><td>iUfzQOZenwnYorIzpGlU</td></tr></table>", "s_c448a753f6": "<table ><tr><th>match_score</th><td>-61423.1314225705</td></tr><tr><th>strengths</th><td>gPmfVOzopfdPwtWNZvbU</td></tr><tr><th>gaps</th><td>vJDfvwBFBIreWcfnfiUf</td></tr><tr><th>overall_assessment</th><td>gnAFpiwCyPmyQgVOTYrF</td></tr></table>", "s_b82bebd560": "<a href=\"data/CVx5/CV-02.pdf\" class=\"msg-pdf\">data/CVx5/CV-02.pdf</a>", "s_451643b0ff": "<table ><thead><tr><th>text_and_images</th><th>page_view</th></tr></thead><tbody><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr><tr><td><table ><tr><th>text</th><td><table ><tr><th>text</th><td>DRY RUN: OCR text</td></tr></table></td></tr><tr><th>images</th><td></td></tr></table></td><td>None</td></tr></tbody></table>", "s_44444fe85a": "<table ><tr><th>skills</th><td>uFnIkwWXWoQibNMkfUbx</td></tr><tr><th>experience</th><td>WYxdaxuLRghrJVNTcevU</td></tr><tr><th>education</th><td>NympQPOkbWDKTmvSUGde</td></tr><tr><th>achievements</th><td>LfHsHyIQynfTWoopagTv</td></tr></table>"};
        const stuffMetadata = {"s_b94e399ab9": {"name": "match_analyses", "concept": "MatchAnalysis"}, "s_4a6729ed7a": {"name": "job_offer_pdf", "concept": "PDF"}, "s_15d74c362d": {"name": "cvs", "concept": "PDF"}, "s_482a2528d9": {"name": "job_offer_pages", "concept": "Page"}, "s_b6910d1cd9": {"name": "job_requirements", "concept": "JobRequirements"}, "s_15dd06fe68": {"name": "match_analysis", "concept": "MatchAnalysis"}, "s_c8adf02cf5": {"name": "cv_pdf", "concept": "PDF"}, "s_385e2c2510": {"name": "cv_pages", "concept": "Page"}, "s_dc8e9682f0": {"name": "candidate_profile", "concept": "CandidateProfile"}, "s_c448a753f6": {"name": "match_analysis", "concept": "MatchAnalysis"}, "s_b82bebd560": {"name": "cv_pdf", "concept": "PDF"}, "s_451643b0ff": {"name": "cv_pages", "concept": "Page"}, "s_44444fe85a": {"name": "candidate_profile", "concept": "CandidateProfile"}};
        const mermaidCode = `flowchart TD

    %% Pipe and stuff nodes within controller subgraphs
    subgraph sg_n_d999b567cb["analyze_cvs_for_job_offer"]
        subgraph sg_n_73e92e657c["process_cv_batch"]
            subgraph sg_n_a39a037228["process_cv"]
                n_8893ab3654["analyze_cv"]
                s_dc8e9682f0(["candidate_profile<br/>CandidateProfile"]):::stuff
                n_7abb594330["analyze_match"]
                s_15dd06fe68(["match_analysis<br/>MatchAnalysis"]):::stuff
                n_2eda08dfa5["extract_cv"]
                s_385e2c2510(["cv_pages<br/>Page"]):::stuff
            end
            subgraph sg_n_46a5b90c7e["process_cv"]
                n_ec4b74880e["analyze_cv"]
                s_44444fe85a(["candidate_profile<br/>CandidateProfile"]):::stuff
                n_1a61f657ec["analyze_match"]
                s_c448a753f6(["match_analysis<br/>MatchAnalysis"]):::stuff
                n_ec4eff0ce7["extract_cv"]
                s_451643b0ff(["cv_pages<br/>Page"]):::stuff
            end
        end
        n_fd0528b4ef["analyze_job_requirements"]
        s_b6910d1cd9(["job_requirements<br/>JobRequirements"]):::stuff
        n_b850f85f50["extract_job_offer"]
        s_482a2528d9(["job_offer_pages<br/>Page"]):::stuff
    end

    %% Pipeline input stuff nodes (no producer)
    s_c8adf02cf5(["cv_pdf<br/>PDF"]):::stuff
    s_b82bebd560(["cv_pdf<br/>PDF"]):::stuff
    s_4a6729ed7a(["job_offer_pdf<br/>PDF"]):::stuff

    %% Data flow edges: producer -> stuff -> consumer
    n_7abb594330 --> s_15dd06fe68
    n_1a61f657ec --> s_c448a753f6
    n_b850f85f50 --> s_482a2528d9
    n_ec4eff0ce7 --> s_451643b0ff
    n_ec4b74880e --> s_44444fe85a
    n_8893ab3654 --> s_dc8e9682f0
    n_fd0528b4ef --> s_b6910d1cd9
    n_2eda08dfa5 --> s_385e2c2510
    s_482a2528d9 --> n_fd0528b4ef
    s_c8adf02cf5 --> n_2eda08dfa5
    s_b82bebd560 --> n_ec4eff0ce7
    s_451643b0ff --> n_ec4b74880e
    s_44444fe85a --> n_1a61f657ec
    s_dc8e9682f0 --> n_7abb594330
    s_b6910d1cd9 --> n_1a61f657ec
    s_b6910d1cd9 --> n_7abb594330
    s_385e2c2510 --> n_8893ab3654
    s_4a6729ed7a --> n_b850f85f50

    %% Style definitions
    classDef failed fill:#ffcccc,stroke:#cc0000
    classDef controller fill:#e6f3ff,stroke:#0066cc
    classDef stuff fill:#fff3e6,stroke:#cc6600,stroke-width:2px

    %% Subgraph depth-based coloring
    style sg_n_46a5b90c7e fill:#fffde6
    style sg_n_73e92e657c fill:#e6ffe6
    style sg_n_a39a037228 fill:#fffde6
    style sg_n_d999b567cb fill:#e6f3ff`;

        // Track current state
        let currentStuffId = null;
        let currentFormat = 'html';
        let currentTheme = 'default';

        // Theme-specific color palettes for custom node styling
        const themePalettes = {
            default: {
                page: { bg: '#f8fafc', text: '#1e293b', label: '#64748b', border: '#cbd5e1',
                        borderHover: '#94a3b8', selectBg: 'white', containerBg: 'white' },
                failed: { fill: '#fee2e2', stroke: '#dc2626' },
                controller: { fill: '#dbeafe', stroke: '#2563eb' },
                pipe: { fill: '#dbeafe', stroke: '#2563eb' },
                stuff: { fill: '#fef3c7', stroke: '#d97706' },
                subgraph: ['#eff6ff', '#ecfdf5', '#fefce8', '#fdf4ff', '#f0fdfa']
            },
            dark: {
                page: { bg: '#1a1a2e', text: '#e0f7fa', label: '#80deea', border: '#2d4a5a',
                        borderHover: '#00bcd4', selectBg: '#2d4a5a', containerBg: '#16213e' },
                failed: { fill: '#3a1a1a', stroke: '#ff5252' },
                controller: { fill: '#1a3a4a', stroke: '#00e5ff' },
                pipe: { fill: '#1a3a4a', stroke: '#00e5ff' },
                stuff: { fill: '#2a1a3a', stroke: '#ff4081' },
                subgraph: ['#1e3a4a', '#1a3a3a', '#2a3a4a', '#1a2a4a', '#2a4a4a']
            },
            forest: {
                page: { bg: '#f0fdf4', text: '#14532d', label: '#166534', border: '#86efac',
                        borderHover: '#4ade80', selectBg: 'white', containerBg: '#fafffe' },
                failed: { fill: '#fecaca', stroke: '#b91c1c' },
                controller: { fill: '#dcfce7', stroke: '#16a34a' },
                pipe: { fill: '#dcfce7', stroke: '#16a34a' },
                stuff: { fill: '#fef9c3', stroke: '#ca8a04' },
                subgraph: ['#d1fae5', '#bbf7d0', '#d9f99d', '#fef08a', '#a7f3d0']
            },
            neutral: {
                page: { bg: '#fafafa', text: '#171717', label: '#525252', border: '#d4d4d4',
                        borderHover: '#a3a3a3', selectBg: 'white', containerBg: 'white' },
                failed: { fill: '#fecaca', stroke: '#991b1b' },
                controller: { fill: '#e5e5e5', stroke: '#525252' },
                pipe: { fill: '#e5e5e5', stroke: '#525252' },
                stuff: { fill: '#fef3c7', stroke: '#92400e' },
                subgraph: ['#f5f5f5', '#e5e5e5', '#fafaf9', '#f5f5f4', '#fafafa']
            },
            base: {
                page: { bg: '#fff', text: '#18181b', label: '#52525b', border: '#e4e4e7',
                        borderHover: '#a1a1aa', selectBg: 'white', containerBg: '#fafafa' },
                failed: { fill: '#ffe4e6', stroke: '#e11d48' },
                controller: { fill: '#e0f2fe', stroke: '#0284c7' },
                pipe: { fill: '#e0f2fe', stroke: '#0284c7' },
                stuff: { fill: '#ffedd5', stroke: '#ea580c' },
                subgraph: ['#f0f9ff', '#f0fdf4', '#fffbeb', '#fdf4ff', '#ecfeff']
            }
        };

        function applyPageTheme(theme) {
            const palette = themePalettes[theme]?.page || themePalettes.default.page;
            document.documentElement.style.setProperty('--bg-color', palette.bg);
            document.documentElement.style.setProperty('--text-color', palette.text);
            document.documentElement.style.setProperty('--label-color', palette.label);
            document.documentElement.style.setProperty('--border-color', palette.border);
            document.documentElement.style.setProperty('--border-hover', palette.borderHover);
            document.documentElement.style.setProperty('--select-bg', palette.selectBg);
            document.documentElement.style.setProperty('--container-bg', palette.containerBg);
        }

        function applyThemeColors(code, theme) {
            const palette = themePalettes[theme] || themePalettes.default;
            let result = code;

            // Replace classDef colors
            result = result.replace(
                /classDef\s+failed\s+fill:[^,]+,stroke:[^\s\n]+/g,
                `classDef failed fill:${palette.failed.fill},stroke:${palette.failed.stroke}`
            );
            result = result.replace(
                /classDef\s+controller\s+fill:[^,]+,stroke:[^\s\n]+/g,
                `classDef controller fill:${palette.controller.fill},stroke:${palette.controller.stroke}`
            );
            result = result.replace(
                /classDef\s+pipe\s+fill:[^,]+,stroke:[^\s\n]+/g,
                `classDef pipe fill:${palette.pipe.fill},stroke:${palette.pipe.stroke}`
            );
            result = result.replace(
                /classDef\s+pipe_failed\s+fill:[^,]+,stroke:[^\s\n]+/g,
                `classDef pipe_failed fill:${palette.failed.fill},stroke:${palette.failed.stroke}`
            );
            result = result.replace(
                /classDef\s+stuff\s+fill:[^,]+,stroke:[^,]+/g,
                `classDef stuff fill:${palette.stuff.fill},stroke:${palette.stuff.stroke}`
            );

            // Replace subgraph fill colors (style sg_xxx fill:#xxx)
            const subgraphColors = palette.subgraph;
            let colorIndex = 0;
            result = result.replace(
                /style\s+(sg_[^\s]+)\s+fill:#[a-fA-F0-9]+/g,
                (match, subgraphId) => {
                    const color = subgraphColors[colorIndex % subgraphColors.length];
                    colorIndex++;
                    return `style ${subgraphId} fill:${color}`;
                }
            );

            return result;
        }

        function initMermaid(theme) {
            mermaid.initialize({
                startOnLoad: false,
                theme: theme,
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true,
                    curve: 'basis'
                }
            });
        }

        function attachClickHandlers() {
            // Wait for mermaid to render, then attach click handlers
            setTimeout(() => {
                const svgContainer = document.querySelector('.mermaid svg');
                if (!svgContainer) return;

                // Find nodes by their flowchart IDs - use any available data source
                const allStuffIds = new Set([
                    ...Object.keys(stuffDataJson || {}),
                    ...Object.keys(stuffDataText || {}),
                    ...Object.keys(stuffDataHtml || {})
                ]);

                for (const stuffId of allStuffIds) {
                    // Mermaid generates IDs like 'flowchart-s_xxx-123'
                    const nodes = svgContainer.querySelectorAll(`[id^="flowchart-${stuffId}"]`);
                    nodes.forEach(node => {
                        node.classList.add('clickable-stuff');
                        node.addEventListener('click', (e) => {
                            e.stopPropagation();
                            showModal(stuffId);
                        });
                    });
                }
            }, 500);
        }

        async function renderDiagram(theme) {
            const container = document.getElementById('mermaid-diagram');
            const themedCode = applyThemeColors(mermaidCode, theme);
            container.innerHTML = themedCode;
            container.removeAttribute('data-processed');
            applyPageTheme(theme);
            initMermaid(theme);
            await mermaid.run({ nodes: [container] });
            attachClickHandlers();
        }

        // Set initial theme in dropdown
        document.getElementById('theme-select').value = currentTheme;

        // Handle theme change
        document.getElementById('theme-select').addEventListener('change', async (e) => {
            currentTheme = e.target.value;
            await renderDiagram(currentTheme);
        });

        // Initial render on page load
        renderDiagram(currentTheme);

        // Set up format tab handlers
        document.querySelectorAll('.format-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                if (tab.disabled) return;
                const format = tab.dataset.format;
                setFormat(format);
            });
        });

        function setFormat(format) {
            currentFormat = format;
            // Update tab styling
            document.querySelectorAll('.format-tab').forEach(t => t.classList.remove('active'));
            document.getElementById(`tab-${format}`).classList.add('active');
            // Re-render content if modal is open
            if (currentStuffId) {
                renderContent(currentStuffId, format);
            }
        }

        function renderContent(stuffId, format) {
            const content = document.getElementById('modal-content');
            content.classList.remove('html-content', 'text-content');

            if (format === 'json') {
                const data = stuffDataJson?.[stuffId];
                content.innerHTML = '';
                content.textContent = data ? JSON.stringify(data, null, 2) : 'No JSON data available';
            } else if (format === 'text') {
                const data = stuffDataText?.[stuffId];
                content.classList.add('text-content');
                content.innerHTML = '';
                content.textContent = data || 'No text data available';
            } else if (format === 'html') {
                const data = stuffDataHtml?.[stuffId];
                if (data) {
                    content.classList.add('html-content');
                    content.innerHTML = data;
                } else {
                    content.innerHTML = '';
                    content.textContent = 'No HTML data available';
                }
            }
        }

        function updateTabAvailability(stuffId) {
            const jsonTab = document.getElementById('tab-json');
            const textTab = document.getElementById('tab-text');
            const htmlTab = document.getElementById('tab-html');

            jsonTab.disabled = !stuffDataJson?.[stuffId];
            textTab.disabled = !stuffDataText?.[stuffId];
            htmlTab.disabled = !stuffDataHtml?.[stuffId];

            // Find first available format (HTML -> JSON -> Pretty)
            if (!htmlTab.disabled) return 'html';
            if (!jsonTab.disabled) return 'json';
            if (!textTab.disabled) return 'text';
            return 'html';
        }

        function showModal(stuffId) {
            currentStuffId = stuffId;
            const modal = document.getElementById('data-modal');
            const overlay = document.getElementById('modal-overlay');
            const title = document.getElementById('modal-title');

            // Build title from metadata (name + concept as primary, ID as secondary)
            const meta = stuffMetadata?.[stuffId];
            if (meta && (meta.name || meta.concept)) {
                const primaryParts = [];
                if (meta.name) primaryParts.push(meta.name);
                if (meta.concept) primaryParts.push(`(${meta.concept})`);
                const primary = `<span class="data-modal-title-primary">${primaryParts.join(' ')}</span>`;
                const secondary = `<span class="data-modal-title-secondary">${stuffId}</span>`;
                title.innerHTML = primary + secondary;
            } else {
                title.innerHTML = `<span class="data-modal-title-primary">${stuffId}</span>`;
            }

            // Update tab availability and select best format
            const availableFormat = updateTabAvailability(stuffId);

            // If current format is not available, switch to available one
            const currentTab = document.getElementById(`tab-${currentFormat}`);
            if (currentTab.disabled) {
                setFormat(availableFormat);
            } else {
                renderContent(stuffId, currentFormat);
            }

            modal.style.display = 'block';
            overlay.style.display = 'block';
        }

        function hideModal() {
            document.getElementById('data-modal').style.display = 'none';
            document.getElementById('modal-overlay').style.display = 'none';
            currentStuffId = null;
        }

        // Get current content based on format
        function getCurrentContent() {
            if (!currentStuffId) return null;

            if (currentFormat === 'json') {
                const data = stuffDataJson?.[currentStuffId];
                if (!data) return null;
                return { content: JSON.stringify(data, null, 2), ext: 'json', mime: 'application/json' };
            } else if (currentFormat === 'text') {
                const data = stuffDataText?.[currentStuffId];
                if (!data) return null;
                return { content: data, ext: 'txt', mime: 'text/plain' };
            } else if (currentFormat === 'html') {
                const data = stuffDataHtml?.[currentStuffId];
                if (!data) return null;
                return { content: data, ext: 'html', mime: 'text/html' };
            }
            return null;
        }

        // Copy content to clipboard
        function copyContent() {
            const data = getCurrentContent();
            if (!data) return;

            navigator.clipboard.writeText(data.content).then(() => {
                const btn = document.getElementById('copy-btn');
                const checkIcon = '<svg viewBox="0 0 24 24">' +
                    '<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>';
                const copyIcon = '<svg viewBox="0 0 24 24">' +
                    '<path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1z' +
                    'm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z' +
                    'm0 16H8V7h11v14z"/></svg>';
                btn.innerHTML = checkIcon;
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.innerHTML = copyIcon;
                    btn.classList.remove('copied');
                }, 1500);
            });
        }

        // Download content as file
        function downloadContent() {
            const data = getCurrentContent();
            if (!data) return;

            // Get name from metadata or use ID
            const meta = stuffMetadata?.[currentStuffId];
            const baseName = meta?.name || currentStuffId || 'data';
            const filename = `${baseName.replace(/[^a-zA-Z0-9_-]/g, '_')}.${data.ext}`;

            const blob = new Blob([data.content], { type: data.mime });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        // Close modal when clicking overlay
        document.getElementById('modal-overlay').addEventListener('click', hideModal);

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') hideModal();
        });
    </script>
</body>
</html>
