flowchart LR

    %% Pipe and stuff nodes within controller subgraphs
    subgraph sg_n_e955185362["cv_interview_prep"]
        n_e777de8444["analyze_match"]
        s_4dffeb11d3(["match_analysis<br/>MatchAnalysis"]):::stuff
        n_3a2ed829aa["extract_cv"]
        s_5aff3a2caf(["cv_pages<br/>Page"]):::stuff
        n_ce4c0bf16f["generate_questions"]
        s_fcc488dc97(["interview_prep<br/>InterviewPrep"]):::stuff
    end

    %% Pipeline input stuff nodes (no producer)
    s_ff970c2401(["cv<br/>Document"]):::stuff
    s_e0273ca95c(["job_offer<br/>Text"]):::stuff

    %% Data flow edges: producer -> stuff -> consumer
    n_3a2ed829aa --> s_5aff3a2caf
    n_ce4c0bf16f --> s_fcc488dc97
    n_e777de8444 --> s_4dffeb11d3
    s_5aff3a2caf --> n_e777de8444
    s_e0273ca95c --> n_e777de8444
    s_e0273ca95c --> n_ce4c0bf16f
    s_ff970c2401 --> n_3a2ed829aa
    s_4dffeb11d3 --> n_ce4c0bf16f

    %% Style definitions
    classDef failed fill:#ffcccc,stroke:#cc0000
    classDef stuff fill:#fff3e6,stroke:#cc6600,stroke-width:2px
    classDef controller fill:#e6f3ff,stroke:#0066cc

    %% Subgraph depth-based coloring
    style sg_n_e955185362 fill:#e6f3ff